/*
 * Button_press_toggle_led.c
 *
 *  Created on: Feb 15, 2026
 *      Author: My PC
 */



#include "stm32_f446xx.h"
#include "stm32_f446xx_gpio_driver.h"




int main (void){
	GPIO_Handle_t GPIO_LED;
	GPIO_LED.pGPIOx = GPIOA;
	GPIO_LED.GPIO_PinConfig.GPIO_PinNumber= GPIO_PIN_NO_5;
	GPIO_LED.GPIO_PinConfig.GPIO_PinOPType= 0;
	GPIO_LED.GPIO_PinConfig.GPIO_PinMode= GPIO_MODE_OUTPUT;
	GPIO_LED.GPIO_PinConfig.GPIO_PinSpeed = GPIO_SPEED_FAST;
	GPIO_LED.GPIO_PinConfig.GPIO_PinPuPdControl = GPIO_PUPD_NO;

	GPIO_Init(&GPIO_LED);

	GPIO_Handle_t BTN_1;
	BTN_1.pGPIOx = GPIOC;
	BTN_1.GPIO_PinConfig.GPIO_PinNumber = GPIO_PIN_NO_13;
	BTN_1.GPIO_PinConfig.GPIO_PinOPType= 0;
	BTN_1.GPIO_PinConfig.GPIO_PinMode= GPIO_MODE_INPUT;
	BTN_1.GPIO_PinConfig.GPIO_PinSpeed= GPIO_SPEED_FAST;
	BTN_1.GPIO_PinConfig.GPIO_PinPuPdControl=GPIO_PUPD_NO;
	GPIO_Init(&BTN_1);




	uint8_t LED_stat = 0;   // declare once, outside loop
	uint8_t previous_btn1_state= 1;
	while(1)
	{
		uint8_t BTN1_STATE =GPIO_ReadFromInputPin(GPIOC,GPIO_PIN_NO_13)
		if (BTN1_STATE==0 && previous_btn1_state==1)
		{
			LED_stat = !LED_stat;
			GPIO_WriteToOutputPin(GIOA,GPIO_PIN_NO_5,LED_stat);

		}

		}


	}

